<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <p><a href="{% url 'post:list' %}">뒤로가기</a></p>

    {% if post.anonymity %}
      <h2>익명 글입니다</h2>
      <h2>익명 내용입니다</h2>
      <h2>{{ post.created_at }}</h2>
      <p>익명</p>
      <br />
    {% else %}
      <h2>{{ post.title }}</h2>
      <h2>{{ post.content }}</h2>
      <h2>{{ post.created_at }}</h2>
      <br>
      <p>{{ post.author.nickname }}</p>
      <br />
    {% endif %}

    <!-- 댓글 -->
    {% for comment in post.comments.all %}
        {{ comment.content }} -

      {% if comment.anonymity %}
        익명 -
      {% else %}
        {{ comment.author.nickname }} -
      {% endif %}

        {{ comment.created_at }}<br>

      {% if user == comment.author %}  
        <a href="{% url 'post:delete' comment.id %}">삭제하기</a>
        <br><br>
      {% endif %}  

    {% empty %}
      댓글이 없습니다
      
    {% endfor %}
    <br><hr>

    <form method="POST" action="{% url 'post:create-comment' post.id %}">
      {% csrf_token %}
      댓글 - <input type="text" name="content"><input type="submit" value="작성">
      <input type="checkbox" name="anonymity">익명
    </form>
    <hr>


    <!-- 작성자에게만 보이게 수정 -->
    {% if user == post.author %}
    <a href="{% url 'post:update' post.id %}">수정하기</a>
    <a href="{% url 'post:delete' post.id %}">삭제하기</a>
    {% endif %}
  </body>
</html>
